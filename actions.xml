<?xml version="1.0"?>

<!DOCTYPE ACTIONS SYSTEM "actions.dtd">

<ACTIONS>
	<ACTION NAME="factor-listener">
		<CODE>
			wm.addDockableWindow("console");
			wm.getDockableWindow("console").setShell("Factor");
		</CODE>
	</ACTION>
	<ACTION NAME="factor-restart">
		<CODE>
			FactorPlugin.restartExternalInstance();
		</CODE>
	</ACTION>
	<ACTION NAME="factor-eval-selection">
		<CODE>
			sel = textArea.selectedText;
			if(sel == null)
				view.toolkit.beep();
			else
				FactorPlugin.evalInListener(view,sel);
		</CODE>
	</ACTION>
	<ACTION NAME="factor-run-file">
		<CODE>
			buffer.save(view,null);
			VFSManager.waitForRequests();
			FactorPlugin.evalInListener(view,
				"\""
				+ FactorReader.charsToEscapes(buffer.path)
				+ "\" run-file");
		</CODE>
	</ACTION>
	<ACTION NAME="factor-apropos">
		<CODE>
			word = FactorPlugin.getWordAtCaret(textArea);
			if(word == null)
				view.toolkit.beep();
			else
			{
				FactorPlugin.evalInListener(view,
					"\""
					+ FactorReader.charsToEscapes(word)
					+ "\" apropos.");
			}
		</CODE>
	</ACTION>
	<ACTION NAME="factor-see">
		<CODE>
			FactorPlugin.factorWordPopupOp(view,"see");
		</CODE>
	</ACTION>
	<ACTION NAME="factor-edit">
		<CODE>
			FactorPlugin.factorWordWireOp(view,"jedit");
		</CODE>
	</ACTION>
	<ACTION NAME="factor-edit-dialog">
		<CODE>
			new EditWordDialog(view,FactorPlugin
				.getSideKickParser());
		</CODE>
	</ACTION>
	<ACTION NAME="factor-usages">
		<CODE>
			FactorPlugin.factorWordOutputOp(view,"usages.");
		</CODE>
	</ACTION>
	<ACTION NAME="factor-insert-use">
		<CODE>
			word = FactorPlugin.getWordAtCaret(textArea);
			if(word == null)
				view.toolkit.beep();
			else
				FactorPlugin.insertUseDialog(view,word);
		</CODE>
	</ACTION>
	<ACTION NAME="factor-extract-word">
		<CODE>
			FactorPlugin.extractWord(view);
		</CODE>
	</ACTION>
	<ACTION NAME="factor-infer-effect">
		<CODE>
			FactorPlugin.factorWordPopupOp(view,"unit infer .");
		</CODE>
	</ACTION>
	<ACTION NAME="factor-compile">
		<CODE>
			FactorPlugin.factorWordOutputOp(view,"recompile");
		</CODE>
	</ACTION>
	<ACTION NAME="factor-infer-effects">
		<CODE>
			InferBufferProcessor.createInferUnitTests(view,buffer,
				FactorPlugin.getExternalInstance());
		</CODE>
	</ACTION>
	<ACTION NAME="factor-compile-all">
		<CODE>
			wm.showDockableWindow("console");
			CompileBufferProcessor.compileWordsInBuffer(view,buffer,
				FactorPlugin.getExternalInstance(),
				wm.getDockableWindow("console"));
		</CODE>
	</ACTION>
</ACTIONS>
